# Purpose Values

The `purpose` field is a JSONB wrapped array classifying WHAT sections of a law do structurally.

This is distinct from `duty_type` which classifies WHO has obligations (Duty, Right, Responsibility, Power).

## Origin

The Airtable `duty_type` column was a combined multi-select that mixed two taxonomies:
- **Obligation tags** (WHO): Duty, Right, Responsibility, Power
- **Purpose tags** (WHAT): Amendment, Interpretation, etc.

The `split_duty_type_purpose.exs` script separates them:
- Obligation tags stay in `duty_type` → `{"values": ["Duty", "Right"]}`
- Purpose tags move to `purpose` → `{"values": ["Amendment", "Interpretation+Definition"]}`

## Valid Values (15 categories)

Sorted by priority order. Uses `+` as separator instead of `,` to avoid CSV parsing issues.

| # | Value | Airtable Original | Description |
|---|-------|-------------------|-------------|
| 1 | **Enactment+Citation+Commencement** | Enactment, Citation, Commencement | When the law takes effect |
| 2 | **Interpretation+Definition** | Interpretation, Definition | Term definitions |
| 3 | **Application+Scope** | Application, Scope | What the law applies to |
| 4 | **Extent** | Extent | Geographic coverage |
| 5 | **Exemption** | Exemption | Excluded situations |
| 6 | **Process+Rule+Constraint+Condition** | Process, Rule, Constraint, Condition | Procedural requirements (default) |
| 7 | **Power Conferred** | Power Conferred | General powers granted |
| 8 | **Charge+Fee** | Charge, Fee | Financial obligations |
| 9 | **Offence** | Offence | Criminal provisions |
| 10 | **Enforcement+Prosecution** | Enforcement, Prosecution | Legal proceedings |
| 11 | **Defence+Appeal** | Defence, Appeal | Defences and appeals |
| 12 | **Liability** | Liability | Liability provisions |
| 13 | **Repeal+Revocation** | Repeal, Revocation | Superseded provisions |
| 14 | **Amendment** | Amendment | Changes to other laws |
| 15 | **Transitional Arrangement** | Transitional Arrangement | Temporary provisions |

Note: `Liability` (value 12) is generated by the PurposeClassifier but does not appear in the original Airtable taxonomy. It was added as a new detection category.

## DB Columns

### `purpose` (JSONB wrapped array)

- **Column**: `purpose`
- **Type**: `map` (JSONB)
- **Format**: `{"values": ["Amendment", "Interpretation+Definition", ...]}`
- **Has Data**: 8,060 records
- **Source**: Taxa stage PurposeClassifier (regex-based text analysis)

### `duty_type` (JSONB wrapped array)

- **Column**: `duty_type`
- **Type**: `map` (JSONB)
- **Format**: `{"values": ["Duty", "Right", "Responsibility", "Power"]}`
- **Has Data**: 3,305 records
- **Valid values**: Duty, Right, Responsibility, Power (only these 4)
- **Source**: Taxa stage DutyType classifier

## Data Sources

### Airtable CSV (`duty_type` column)

7,775 records have the combined field. The CSV import (`update_uk_lrt_duty_type.exs`) writes the full combined set to `duty_type`. The split script (`split_duty_type_purpose.exs`) then separates obligation from purpose tags.

### Taxa Parser (PurposeClassifier)

Generates `purpose` from regex analysis of law text. Runs on every law during taxa parsing. Produces the `+` separator format directly. Falls back to `Process+Rule+Constraint+Condition` when no other patterns match.

### Taxa Parser (DutyType)

Generates `duty_type` from regex analysis of law text. Only contains the 4 obligation types: Duty, Right, Responsibility, Power.

## Population Summary

| Category | Count |
|----------|-------|
| Both purpose and duty_type | 3,305 |
| Purpose only | 4,755 |
| Neither | 11,258 |
| duty_type only | 0 |

Records with `duty_type` always have `purpose` too (both come from taxa parsing). Records with `purpose` only are laws where text analysis found purpose patterns but no obligation types (non-making laws like amendments).

## Related

- [Function Values](./FUNCTION_VALUES.md) - Making, Amending, Revoking, etc.
- `backend/lib/sertantai_legal/legal/taxa/purpose_classifier.ex` - PurposeClassifier implementation
- `scripts/data/split_duty_type_purpose.exs` - Splits combined Airtable duty_type into purpose + duty_type
